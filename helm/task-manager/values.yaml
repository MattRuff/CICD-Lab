# Default values for task-manager
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

namespace:
  name: task-app
  create: true

# PostgreSQL Database Configuration
postgresql:
  enabled: true
  image:
    repository: postgres
    tag: "16-alpine"
    pullPolicy: IfNotPresent
  
  service:
    type: ClusterIP
    port: 5432
  
  config:
    database: taskdb
    username: postgres
    password: postgres  # Change in production!
  
  persistence:
    enabled: true
    storageClass: ""  # Use default storage class
    accessMode: ReadWriteOnce
    size: 1Gi
  
  resources:
    requests:
      memory: "256Mi"
      cpu: "250m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  
  livenessProbe:
    enabled: true
    initialDelaySeconds: 30
    periodSeconds: 10
  
  readinessProbe:
    enabled: true
    initialDelaySeconds: 5
    periodSeconds: 5

# Zookeeper Configuration (required for Kafka)
zookeeper:
  enabled: true
  image:
    repository: confluentinc/cp-zookeeper
    tag: "7.5.0"
    pullPolicy: IfNotPresent
  
  service:
    type: ClusterIP
    port: 2181
  
  env:
    clientPort: 2181
    tickTime: 2000
  
  resources:
    requests:
      memory: "256Mi"
      cpu: "250m"
    limits:
      memory: "512Mi"
      cpu: "500m"

# Kafka Configuration
kafka:
  enabled: true
  image:
    repository: confluentinc/cp-kafka
    tag: "7.5.0"
    pullPolicy: IfNotPresent
  
  service:
    type: ClusterIP
    port: 9092
  
  config:
    brokerId: 1
    replicationFactor: 1
    autoCreateTopics: true
  
  resources:
    requests:
      memory: "512Mi"
      cpu: "500m"
    limits:
      memory: "1Gi"
      cpu: "1000m"
  
  livenessProbe:
    enabled: true
    initialDelaySeconds: 60
    periodSeconds: 30
  
  readinessProbe:
    enabled: true
    initialDelaySeconds: 30
    periodSeconds: 10

# Backend API Configuration
backend:
  enabled: true
  replicaCount: 2
  
  image:
    repository: task-backend
    tag: latest
    pullPolicy: IfNotPresent
  
  service:
    type: ClusterIP
    port: 3000
    targetPort: 3000
  
  env:
    port: 3000
  
  resources:
    requests:
      memory: "256Mi"
      cpu: "250m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  
  livenessProbe:
    enabled: true
    path: /health
    initialDelaySeconds: 30
    periodSeconds: 10
  
  readinessProbe:
    enabled: true
    path: /health
    initialDelaySeconds: 10
    periodSeconds: 5
  
  autoscaling:
    enabled: false
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 80

# Consumer Service Configuration
consumer:
  enabled: true
  replicaCount: 1
  
  image:
    repository: task-consumer
    tag: latest
    pullPolicy: IfNotPresent
  
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"

# Frontend Configuration
frontend:
  enabled: true
  replicaCount: 2
  
  image:
    repository: task-frontend
    tag: latest
    pullPolicy: IfNotPresent
  
  service:
    type: LoadBalancer
    port: 80
    targetPort: 80
  
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"
  
  livenessProbe:
    enabled: true
    path: /
    initialDelaySeconds: 10
    periodSeconds: 10
  
  readinessProbe:
    enabled: true
    path: /
    initialDelaySeconds: 5
    periodSeconds: 5
  
  autoscaling:
    enabled: false
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 80

# Global settings
global:
  labels:
    app: task-manager
    managed-by: helm

